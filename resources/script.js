const allEqual=n=>n.every(e=>e===n[0]);let container=document.getElementsByClassName("container")[0],matrix,buffer,currentLine,end;function sendToServer(t){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE){var n=JSON.parse(e.responseText);for(let e=0;e<5;e++)matrix[t][e].id=0==n[e]?"right-box":1==n[e]?"exists-box":"absent-box";0==n[0]&&allEqual(n)&&(end=!0)}},e.open("POST","/try"),e.send(buffer.toLowerCase())}function resetGame(){var e=new XMLHttpRequest;e.open("POST","/regenerate"),e.send(null),matrix=getMatrix(),buffer="",currentLine=0,end=!1}function updateLine(){let n=buffer;for(let e=buffer.length;e<5;e++)n+=" ";for(let e=0;e<5;e++)matrix[currentLine][e].innerHTML=n[e]}function getMatrix(){var t=[];container.innerHTML=null;for(let n=0;n<6;n++){var r=document.createElement("div");t.push([]);for(let e=0;e<5;e++){var a=document.createElement("div");a.className="letter-box",r.appendChild(a),t[n].push(a)}r.className="letter-box-line",container.appendChild(r)}return t}resetGame(),document.addEventListener("keydown",function(e){end?resetGame():13==e.keyCode&&5==buffer.length?5==currentLine?(end=!0,sendToServer(currentLine),updateLine()):(sendToServer(currentLine),updateLine(),buffer="",currentLine++):(8==e.keyCode&&0!=buffer.length?buffer=buffer.substring(0,buffer.length-1):buffer.length<5&&(65<=e.keyCode&&e.keyCode<=90||97<=e.keyCode&&e.keyCode<=122)&&(buffer+=String.fromCharCode(e.keyCode)),updateLine())});